<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>crossfields-stop-watch test</title>

    <script src="../../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../web-component-tester/browser.js"></script>

    <link rel="import" href="../../crossfields-stop-watch.html">
  </head>
  <body>
    <test-fixture id="crossfields-stop-watch-fixture">
      <template>
        <crossfields-stop-watch></crossfields-stop-watch>
      </template>
    </test-fixture>

    <script>
      suite('crossfields-stop-watch', function() {
        var crossfieldsStopwatch;

        setup(function() {
            crossfieldsStopwatch = fixture('crossfields-stop-watch-fixture');
        })

        test('instantiating the element works', function() {
          assert.equal(crossfieldsStopwatch.is, 'crossfields-stop-watch');
        });

        test('button states when ticker is active', function() {
          var startButton = crossfieldsStopwatch.querySelector('.timer-start');
          expect(startButton).to.have.property('disabled').to.be.false;
          startButton.click();
          expect(startButton).to.have.property('disabled').to.be.true;
          var stopButton = crossfieldsStopwatch.querySelector('.timer-stop');
          expect(stopButton).to.have.property('disabled').to.be.false;
          var resetButton = crossfieldsStopwatch.querySelector('.timer-reset');
          expect(resetButton).to.have.property('disabled').to.be.false;
        });

        test('reset button should return to 0', function() {
          var startButton = crossfieldsStopwatch.querySelector('.timer-start');
          startButton.click();
          var time = crossfieldsStopwatch.querySelector('#face');
          setTimeout(function(){
            expect(time.innerText).to.not.equal("00:00.0");
            var resetButton = crossfieldsStopwatch.querySelector('.timer-reset');
            resetButton.click();
            expect(time.innerText).to.equal("00:00.0");
          }, 2000);
        });

        test('incorporate offset value', function() {
          crossfieldsStopwatch.offset = 5000;
          var time = crossfieldsStopwatch.querySelector('#face');
          expect(time.innerText).to.equal("00:05.0");

        });
      });
    </script>
  </body>
</html>
